<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-us" http-equiv="Content-Language" />
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type" />
<meta name="topictype" content="Ta" />
<meta name="devlang" content="cpp" />
<link href="../CAADocStyleSheets/caav5.css" rel="stylesheet" type="text/css"/>
<script src="../CAADocJavaScript/DSDocTocToc.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/DSDocHighlight.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/submit.js" type="text/javascript">/* */</script>
<title>3DEXPERIENCE Platform Adoption Tips</title>
</head>

<body onload="createToc(); highlightSearchTerms();">

<table class="DocHeader">
	<tr>
		<td class="DocHeader1">
		<h1><a name="Top"></a>3DEXPERIENCE Platform Adoption Tips</h1>
		</td>
	</tr>
	<tr>
		<td class="tech">Technical Article</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table class="abstract">
	<tr>
		<td>
		<h2>Abstract</h2>
		<p>The previous article "<span class="uicontrol">3D</span>EXPERIENCE 
		Platform Novelties"[<a href="#References">1</a>] 
		gives a global view of the changes that occurred in the CAA Application 
		Frame as from R2014.</p>
		<p>This article focuses on the impacts for your CAA applications and will 
		give you tips on how to migrate your commands to adopt the 
		<span class="uicontrol">3D</span>EXPERIENCE Platform principles.</p>
		<div id="toc">
		</div>
		</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Impacts"></a>Impacts for your CAA Applications</h2>
<ul>
<li>
<p><strong>Toolbars and the menu bar have been suppressed</strong>.</p>
<p>These major changes are the most impacting for your CAA applications. In order 
to be compliant with the new user interface, it will be necessary to relocate 
your commands. For that, you 
will need to re-think their logical organization in the frame.</p>
<p>The next chapters will help you to understand where to relocate your commands 
and how to migrate the source code.</p></li>
<li><strong>Workbenches have become apps</strong>
<p>This impacts the way to declare your CAA workbenches in the 3DEXPERIENCE platform.</p>
</li>
</ul>

<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="ActionBar"></a>Where to Locate your Commands?</h2>
<p>Most of your commands or toolbars are meant to be located in the new action bar, 
which is the main area to access app commands. A command in the action 
bar must be a command that launches an action. For example, commands that create 
or analyze something. The action bar only allows standard commands launched by a 
simple push button represented by an icon. Specialized commands (for example a combo), 
are not authorized.</p>
<p>Commands that modify properties or options can be inserted in dedicated 
panels, the <kbd>Object Properties</kbd> panel or the <kbd>App Options</kbd> panel. </p>
<p>Contextual menus remain a possibility for any contextual command. If you have 
already defined contextual menus, there's nothing to change.</p>
<p>Note: in future versions, it will be possible to locate some of your commands 
in the global items of the top bar.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Sections"></a>How to Organize your Commands in the Action Bar ?
</h2>
<p>The aim is to organize your commands in such a way that when you are performing 
a specific task, you have a quick an easy access to the most useful commands. 
Commands of the action bar are organized in sections, and in groups within 
sections. Sections and groups have a primary area with commands visible at all 
times, and eventually a secondary area with commands visible on demand, those 
less frequently used then the commands in the primary area. Similar commands can 
be grouped in flyouts.</p>
<p>To make a command visible in the action bar, it is mandatory to declare 
its section. There are different types of sections that are listed below:</p>
<h3><a name="GlobalSection"></a>General Sections</h3>
<p>There are three general sections that all apps inherit from, in which you can 
insert your commands:</p>
<ul>
	<li>The fixed area
	<table>
			<tr>
				<td>
				<img alt="" src="images/CAAFixedArea.png" width="682" height="95"/>
				</td>
			</tr>
		</table>
		<p>Located on the left hand side of the action bar and always visible, it contains standard 
		frequently used commands that are independent of the current context, such 
		as Copy/Paste, Undo/Redo, etc. It replaces the former <kbd>Standard</kbd> 
		toolbar:</p>
		
		<table>
			<caption>The Former <kbd>Standard</kbd> Toolbar</caption>
			<tr>
				<td>
				<img alt="" src="images/CAAOldStdToolBar.jpg"/>
				</td>
			</tr>
		</table>
	</li>
	<li>The Tools section
	<table>
			<tr>
				<td>
				<img alt="" src="images/CAAToolsSection.png" width="881" height="124"/>
				</td>
			</tr>
		</table>

		<p>It contains general transverse tools, such as the commands that used 
		to be contained in the <kbd>Knowledge</kbd> toolbar:</p>
		<table>
			<caption>The Former <kbd>Knowledge</kbd> Toolbar</caption>
			<tr>
				<td>
				<img alt="" height="72" src="images/CAAOldKnowledgeToolBar.jpg" width="287"/>
				</td>
			</tr>
		</table>
	</li>
	<li>The View section
	<table>
			<tr>
				<td>
				<img alt="" src="images/CAAViewSection.png" width="705" height="131"/>
				</td>
			</tr>
		</table>

		<p>It replaces the former <kbd>View</kbd> toolbar:</p>
		<table>
			<caption>The Former <kbd>View</kbd> Toolbar</caption>
			<tr>
				<td>
				<img alt="View Section" height="73" src="images/CAAOldViewToolBar.jpg" width="340"/>
				</td>
			</tr>
		</table>
	</li>
</ul>
<h3><a name="CAASection"></a>Your Own Sections</h3>
<p>You can create new sections for your apps or add-ins.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Prop"></a>Properties and Options</h2>
<p>Two panels are provided to store commands that deal with object properties and 
application options, the <kbd>Object Properties</kbd> panel and the <kbd>App Options</kbd> panel. You 
can insert any appropriate commands into these panels.</p>
<table>
	<tr>
		<td>
		<img alt="" src="images/CAANewPropertiesPanel.jpg" width="446" height="188"/></td>
		<td>
		<img alt="" src="images/CAANewAppModePanel.jpg" width="250" height="306"/></td>
	</tr>
</table>

<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="R2014GA"></a>What Happens to your Commands by Default?</h2>
<ul>
	<li><strong>Former Workbenches</strong>:
		<p>Your CAA workbenches are now considered as apps. To make your apps 
		accessible from the compass, you need&nbsp; to declared 
		them in a platform management service called <strong>MyApps</strong>[<a href="#References">3</a>]. 
		This step is mandatory. Once this 
		declaration is done, your apps become visible in  
		the quadrant of the compass you have specified for them. </p>
		<table>
			<caption>Example of CAA Apps </caption>
			<tr>
				<td>
				<img alt="" src="images/CAAAppsList.jpg" width="288" height="248"/>
				</td>
			</tr>
		</table>
	</li>
	<li><strong>Toolbars</strong>:
		<p>Toolbars are meant to disappear. Until you have relocated somewhere else 
		in the frame (most probably into a section of the action bar), by default, 
		they will continue to appear underneath the action bar.</p>
		<p>The picture below shows how the CAA Geometry sample appeared before the toolbars were relocated into 
		sections of the action bar. </p>
		<table>
			<caption>CAA Geometry Toolbars Before Migration</caption>
			<tr>
				<td>
				<img alt="" src="images/CAAOldToolBars.png" width="574" height="201"/>
				</td>
			</tr>
		</table>
		<p>Sometimes, menu bars were declared as not visible by default. User could 
	interactively set the visibility of toolbars 
	with the <kbd>View</kbd>-&gt;<kbd>Toolbars</kbd> command in the menu bar. If you don't see your old toolbars below the 
	action bar, you might need to make them visible. To do that, you
	should right-click on the top bar, select <kbd>Display</kbd> button and activate your toolbar. </p>
	<table>
			<caption>How to Visualize Old Menubars</caption>
			<tr>
				<td>
				<img alt="" src="images/CAAOldMenubarCheck.png" width="512" height="227"/>
				</td>
			</tr>
		</table>
	</li>
	<li><strong>Menus in the Menu Bar</strong>:
		<p>The former menu bar that used to be at the top of the application 
		frame has been suppressed. Any of your commands located in 
		one of the menus of the menu bar needs to be relocated. Until you have 
		migrated, these commands remain accessible.</p>
		<p>The access to the former menu bar is provided by a dedicated button in 
		the <kbd>Tools</kbd> section of the action bar. It's a secondary command, thus it's 
		hidden by default. In the different menus, you will only see your  
		remaining commands, all DS commands having been suppressed from these menus. 
		If there are no commands left in a menu, it disappears from the list 
		of menus. In the example below, there is only one remaining menu item 
		shown, it's the <kbd>View</kbd> menu. </p>
		<table>
			<caption>The Menu Bar Button</caption>
			<tr>
				<td>
				<img alt="" src="images/CAAOldMenuBarButton.png" width="400" height="255"/>
				</td>
			</tr>
		</table>
	</li>
	
	<li><strong>Contextual Menus</strong>:
		<p>There is no change concerning commands in a contextual menu.</p>
	</li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Migr"></a>How to Migrate</h2>
<h3><a name="Migr1"></a>Declare Action Bar</h3>
<p>To be able to add commands in the action bar in the context of your app 
(former workbench), you need to set a representation type by adding a line in the <code>
CreateWorkbench</code> method that creates your app:</p>
<pre class="code">CATCmdWorkbench * MyWkb::CreateWorkbench()
{
  NewAccess(CATCmdWorkbench,pMyCAAWkb,MyCAAWkbId);
  <strong>SetAccessRepresentationType(pMyCAAWkb, "AfrActionBar");</strong>
  
  ... 
  
  return pMyCAAWkb;
}</pre>
<h3><a name="Migr2"></a>Declare Sections</h3>
<p>To organize your toolbars into sections, you need to add a level of container 
as parent of your toolbars. This container corresponds to the section. It is 
mandatory to keep the toolbar container level in between the 
section and your commands, or else the commands will not be visible. This 
logical level is visible in the action bar thanks to separators within the 
section, it corresponds to the groups within sections that we mentioned earlier 
in this article.</p>

<p>In the case of declaration of toolbars for an app (former workbench), it's in the <code>CreateWorkbench</code> method.</p>

<pre class="code">
CATCmdWorkbench * MyWkb::CreateWorkbench()
{
...
	
   <strong> NewAccess(CATCmdContainer,pMySection,MySectionId);
    AddAccessChild(pMyCAAWkb, pMySection);</strong>

    NewAccess(CATCmdContainer,pMyCAATlb,MyCAATlbId);
    SetAccessChild(<strong>pMySection</strong>, pMyCAATlb);

  ... 
  
  return pMyCAAWkb;
}
</pre>

<p>In the case of declaration of toolbars for an add-in, it's in the <code>CreateToolbars</code> 
method. <strong>Beware of the value returned by the method,</strong> it needs to be the 
highest level of 
container declared in the method. In the following example, it's the pointer on 
the declared section, while it used to be the pointer on the toolbar.</p>

<pre class="code">
CATCmdContainer * myAddin::CreateToolbars()
{
  <strong> NewAccess(CATCmdContainer,pMySection,MySectionId);</strong>
  
   NewAccess(CATCmdContainer,pMyCAATlb,MyCAATlbId);
   SetAccessChild(<strong>pMySection</strong>, pMyCAATlb);

...
   return <strong>pMySection</strong>;
}
</pre>



<p>The section identifier declared in the <code>NewAccess</code> macro, here &quot;MySectionId&quot;, 
is unique and determines in which section your toolbar is located. You can associate 
this Id with a title by adding the title name in the CATNls resource file:</p>
<pre class="code">...

MySectionId.Title        = "My Section Name" ;
...
</pre>
<p>If you want to add a toolbar in the fixed section,<kbd>Tools</kbd> Section or <kbd>View</kbd> Section, 
you should use the following identifiers:</p>
<ul>
	<li>"<strong>AfrActionBarFixedSection</strong>" to merge your toolbar with the 
		fixed area.
		<pre class="code">...
	
   NewAccess(CATCmdContainer, pFixedSection, <strong>AfrActionBarFixedSection</strong>);
   AddAccessChild(pMyCAAWkbWkb, pFixedSection);

   ...
   NewAccess(CATCmdContainer,pMyCAATlb,MyCAATlbId);
   AddAccessChild(pFixedSection, pMyCAATlb); 
...</pre>
	</li>
	<li>"<strong>AfrGeneralSection</strong>" to merge your toolbar with the <kbd>Tools</kbd> 
		Section.
		<pre class="code">...
	
   NewAccess(CATCmdContainer, pGeneralSection, <strong>AfrGeneralSection</strong>);
   AddAccessChild(pMyCAAWkbWkb, pGeneralSection);

   ...
   NewAccess(CATCmdContainer,pMyCAATlb,MyCAATlbId);
   AddAccessChild(pGeneralSection, pMyCAATlb); 
...</pre>
	</li>
	<li>"<strong>AfrViewSection</strong>" to merge your toolbar with the <kbd>View</kbd> Section.
		<pre class="code">...
	
   NewAccess(CATCmdContainer, pViewSection, <strong>AfrViewSection</strong>);
   AddAccessChild(pMyCAAWkbWkb, pViewSection);

   ...
   NewAccess(CATCmdContainer,pMyCAATlb,MyCAATlbId);
   AddAccessChild(pViewSection, pMyCAATlb); 
...</pre>
	</li>
</ul>

<h3><a name="Migr4"></a>Declare Secondary Commands</h3>
<p>If you want to declare your command as a secondary command, visible on demand, you should use the 
<code>SetAccessWeight</code> macro, either in the <code>CreateWorkbench</code> method or in the <code>CreateToolbars</code> 
method of respectively your app or add-in definition.</p>
<pre class="code">...
   <strong>SetAccessWeight</strong>(pMyCommand, 0.f);
...</pre>


<h3><a name="Migr3"></a>Declare Properties and Options</h3>
<p>To insert a toolbar or a simple command into the <kbd>Properties</kbd> or <kbd>App 
Option</kbd> panels, you need to declare specific properties and options containers 
with their corresponding representation types:</p>
<ul>
	<li><strong>AppModeRepType</strong>
		<pre class="code">...

    NewAccess (CATCmdContainer, pTlbAppMode, ToolbarAppMode); 
    AddAccessChild(pMyCAAWkb, pTlbAppMode);
    SetAccessRepresentationType(pTlbAppMode,"<strong>AppModeRepType</strong>");
    
    NewAccess(CATCmdStarter,pMyCAACmd, MyCAACmdId);
    AddAccessChild(pTlbAppMode, pMyCAACmd);
    SetAccessCommand(pMyCAACmd, "MyCAACmdHdr");
   
...</pre>
	</li>
	<li><strong>ObjectPropertiesRepType</strong>
		<pre class="code">...
	
    NewAccess (CATCmdContainer, pTlbRepType, ToolbarRepType); 
    AddAccessChild(pMyCAAWkb, pTlbRepType);
    SetAccessRepresentationType(pTlbRepType,"<strong>ObjectPropertiesRepType</strong>");
    
    NewAccess(CATCmdContainer, pMyCAATlb, MyCAATlbId);
    AddAccessChild(pTlbRepType, pMyCAATlb); 
   
...</pre>
	</li>
</ul>
<h3><a name="Migr4"></a>Command Icons</h3>
<p> The correct format for the command icons has changed. It is now a 32x32 
size picture in png format, instead of a 20x20 size picture in bmp format.<br />
The way icons are declared in the CATRsc resource file associated with an app 
or add-in does not change:</p>
<pre class="code">MyCAAWkbHeader.MyCAACmdHdr.Icon.Normal    = "I_MyCAAIcon" ;</pre>
<p>Until you have created icons in the new format, the existing icons are used 
by default, but they appear with an nasty rendering.</p>
<h3><a name="Migr5"></a>Suppress Command in the Menu Bar</h3>
<p>Eventually, you should suppress from the menu bar any commands that you have 
declared there. The items of the menu bar were identified by the following names:</p>
<ul>
	<li>Edit Menu: "CATAfrEditMnu".</li>
	<li>View Menu: "CATAfrView".</li>
	<li>Insert Menu: "CATAfrInsertMnu".</li>
	<li>Tools Menu: "CATAfrToolsMnu".</li>
</ul>
<p>The two following macros were used to declare your menus: <code>SetAddinMenu</code>,
<code>SetWorkshopMenu</code>.</p>
<p>For example, the insertion of a command in the Tools Menu:</p>
<pre class="code">...
NewAccess(CATCmdContainer, pMyTlb, MyTlbIf); // a Toolbar container   
NewAccess(CATCmdContainer, pMyMbr, MyMbrId); // a Menubar container 
NewAccess(CATCmdContainer,pMyToolsMnu,<strong>CATAfrToolsMnu</strong>); // a Tools menu container
SetAccessChild(pMyMbr, pMyToolsMnu);

<strong>SetAddinMenu</strong>(pMyTlb,pMyMbr);
...</pre>
<p>All these lines should be suppressed. This step is mostly to clean-up, it 
isn't mandatory.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="InShort"></a>In Short</h2>


<p>There's one immediate mandatory migration step that you need to do, which 
is the declaration of your apps, former workbenches, in the MyApps platform 
management 
service[<a href="#References">3</a>]. In the case of add-ins, there's nothing to do. </p>
<p>Once your apps are have been declared, all your commands remain accessible. 
By default,&nbsp;your CAA toolbars continue to appear underneath the action bar. A 
special button in the action bar enables you to access the menus of the former 
menu bar and their remaining content.</p>

<p>You will need to migrate your commands to make them compliant with the 
<span class="uicontrol">3D</span>EXPERIENCE platform principles. Most of your 
toolbars will need to be reorganized into sections of the action bar, either 
into existing general sections, either into your own new sections. Some of your 
commands might need to be integrated in specific Option or Properties Panels. </p>

<p> The next article, &quot;Migration of a CAA Geometry Sample&quot;[<a href="#References">2</a>] 
explains the different migration steps that were done for a basic use case of the CAA 
Geometry sample. </p>




<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="References"></a>References</h2>
<div id="ref">
<table class="reference">
	<tr>
		<td>[1]</td>
		<td><a href="CAAAfrTaFrameNoveltiesOverview.htm">
		<span class="uicontrol">3D</span>EXPERIENCE Platform 
		Novelties</a></td>
	</tr>
	<tr>
		<td>[2]</td>
		<td><a href="CAAAfrUcSampleWorkbench2.htm">Migration of a CAA Geometry Sample</a></td>
	</tr>
	<tr>
    <td >[3]</td>
    <td ><a href="../CAADocUseCases/CAADocDeclareNewApp.htm">Declaring a Third Party Native App in the 3DCompass Service</a></td>
  </tr>

</table>
</div>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="History"></a>History</h2>
<p><br />
</p>
<table class="history">
	<tr>
		<td>Version: <strong>1</strong> [Feb 2013]</td>
		<td>Document created</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<script type="text/javascript">insertCopyright();</script>

</body>

</html>
